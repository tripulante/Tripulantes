<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { 
      	position: absolute;
      	height: 100% }
      #panel {
      	position: absolute;
      	z-index: 3,
      	width: 100%
      }
      
      #opacity{
      	text-align: center
      }
    </style>
    
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
 	<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
 	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.css" />
	<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
 	<script src="https://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
    <script type="text/javascript">
    	
    	var chronoOverlay;
    	
    	chronoMap.prototype = new google.maps.OverlayView();
    	
    	var resizeMarker, resizeMarker2;
    	
    	var tiledOverlay;
	
	/**
	* Main method of the site
	* @method initialize
	**/
	    	
      function initialize() {
		// Create an array of styles.
		var styles = [
			{
				stylers: [
					{ hue: "#00ffe6" },
					{ saturation: -70 }
					//{ lightness: 50 }
				]
			},
			{
				featureType: "road",
				stylers: [
					{ visibility: "on" },
					{ hue: "#ff0000" }
					//{ lightness: 50 },
					//{ saturation: -50 }
				]
			},
			{
				featureType: "road",
				elementType: "labels",
				stylers: [
					{ visibility: "off" }
				]
			},
			
			{
				featureType: "transit.station.rail",
				elementType: "labels",
				stylers: [
					{ hue: "#ff0000"},
					{ saturation: 30},
					{ visibility: "simplified" }
				]
			},
			{
				featureType: "administrative",
				elementType: "geometry.fill",
				stylers: [
					{ hue: "#ff0000" },
					{ saturation: 40 },
					{ visibility: "on" }
				]
			}
			
		];
		
		var styledMap = new google.maps.StyledMapType(styles, {
			name: "Nuevo!"
		})
		
	  
        var mapOptions = {
          center: new google.maps.LatLng(4.595589, -74.072571), // centrado en la candelaria
          zoom: 15,
		  mapTypeControlOptions: {
			style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
			mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
		  },
		  streetViewControl: true,
		  streetViewControlOptions: {
			position: google.maps.ControlPosition.RIGHT_CENTER
		  },
		  maxZoom: 15,
		  scaleControl: false
		  
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
			
		map.mapTypes.set('map_style', styledMap);
		map.setMapTypeId('map_style');
			
		var luccaIco = "images/ct/LuccaMap.gif";
		var cronoIco = "images/ct/CronoWait.gif";
		var marker = new google.maps.Marker({
			position: map.getCenter(),
			map: map,
			//animation: google.maps.Animation.BOUNCE,
			icon: luccaIco, 
			title: 'Click me!'
		});
		
		
		var cronoLatLen = new google.maps.LatLng(map.getCenter().lat()+0.05, map.getCenter().lng())
		var cronoMarker = new google.maps.Marker({
			position: cronoLatLen,
			map: map,
			icon: cronoIco,
			optimized: false,
			title: 'Click me too!'
		});
		
		
		/*var bikeLayer = new google.maps.BicyclingLayer();
		bikeLayer.setMap(map);*/
		
		//var weatherLayer = new google.maps.weather.WeatherLayer({
		//  temperatureUnits: google.maps.weather.TemperatureUnit.CELSIUS
		//});
		//weatherLayer.setMap(map);
		
		
		//find a way to scale
		//4.772660, -74.086046
		var bogMax = new google.maps.LatLng(4.872660,-73.95934);
		var bogMin = new google.maps.LatLng(4.407008,-74.289155);
		
		var nbNe = new google.maps.LatLng(4.798079048890717,-73.9952802658081);
		var nbSw = new google.maps.LatLng(4.455875696796786,-74.25483226776123);
		
		var imageBounds = new google.maps.LatLngBounds(
			nbSw,
			nbNe
		);
		
		
// 		chronoOverlay = new chronoMap(imageBounds, "../Mapa/mapabogota.png", map);
		
		tiledOverlay = new google.maps.ImageMapType({
			getTileUrl: function(coord, zoom){
				return './out/' + zoom + '/' + coord.x + '/' + coord.y+'.png';
			},
			tileSize: new google.maps.Size(256, 256)
		});
		
		map.overlayMapTypes.push(tiledOverlay);
		
		$("#opacity").slider({
			min: 0,
			max: 100,
			value: 100,
			slide: function(event, ui){
				tiledOverlay.setOpacity(ui.value/100);
			}
		});
		
      }
      	
		
    </script>
  </head>
  <body onload="initialize()">
	
    <div id="map_canvas" basemap="light-political" style="width:100%; height:100%"></div>
    <div id ="panel">
      
      	<div id="opacity"></div>
      	<div id="menu">
		  	<input type="button" value="Toggle visibility" onclick="chronoOverlay.toggle();"></input>
			<input type="button" value="Print Coordinates" onclick="chronoOverlay.print();"></input>
		</div>
    </div>
  </body>
</html>